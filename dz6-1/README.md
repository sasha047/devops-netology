# Домашнее задание к занятию 1. «Типы и структура СУБД»
---
## Задача 1

Архитектор ПО решил проконсультироваться у вас, какой тип БД 
лучше выбрать для хранения определённых данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- электронные чеки в json-виде,
- склады и автомобильные дороги для логистической компании,
- генеалогические деревья,
- кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации,
- отношения клиент-покупка для интернет-магазина.

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

Ответ:  

1. Электронные чеки в JSON: Подойдет NoSQL база данных, например MongoDB. JSON для нее нативный способ хранения данных и взаимодейстия с данными.
2. Автомобильные дороги: Например OpenStreetMaps использует PostgreSQL в качестве основного хранилища данных. Графовые БД, так как в такой структуре можно задавать дополнительные атрибуты для выбора оптимального маршрута
3. Генеалогические деревья: Реляционные БД, это распространённая практика, обеспечат связанность данных.
4. Кеш: Для этой цели часто используют Memcached или Redis. Для хранения кеша лучше подходят NoSQL базы, т.к. работают быстро.
5. Интернет магазины: Реляционная БД. eCommerce.
---
## Задача 2

Вы создали распределённое высоконагруженное приложение и хотите классифицировать его согласно 
CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если 
(каждый пункт — это отдельная реализация вашей системы и для каждого пункта нужно привести классификацию):

- данные записываются на все узлы с задержкой до часа (асинхронная запись);
- при сетевых сбоях система может разделиться на 2 раздельных кластера;
- система может не прислать корректный ответ или сбросить соединение.

Согласно PACELC-теореме как бы вы классифицировали эти реализации?

Ответ:  

- Теорема CAP:

    Асинхронная запись не может дать гарантию консистентности данных. Данные записываются на все узлы с задержкой до часа.
    CA - данные доступны и согласованы

    При сетевых сбоях, система может разделиться на 2 раздельных кластера
    Если система функционирует, разделённая на 2 части, она так же не может быть консистентной.
    AP - данные доступны и устойчивы к разделению (но не согласованы в каждый момент времени)

    Система может не прислать корректный ответ или сбросить соединение
    CP - условие доступности требует, чтобы запрос всегда завершался корректным ответом. (при сбое запросы могут терятся)


- Теорема PACELC

    данные записываются на все узлы с задержкой до часа (асинхронная запись)
    PC/EL - задержки в один час скорей всего будет достаточно, чтобы устранить небольшие сетевые проблемы, логичней делать упор на отзывчивость.

    при сетевых сбоях система может разделиться на 2 раздельных кластера
    PA/EL - Данные доступны, но не согласованы для остаольных узлов. Также играет роль консистентность данных

    система может не прислать корректный ответ или сбросить соединение
    PC/EC - Доступность. При распределении - консистентность

---
## Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

Ответ:  

Не могут. 
ACID ориентирован на целостность данных, а BASE на их доступность.  
Принцип "Soft-state" в BASE противопоставляет себя  ACID, при этом ни один из принципов ACID прямо не противоречит сути BASE.  
Выполнение принципов ACID требует от СУБД сложных механизмов проверки целостности базы после каждой транзакции, что существенно замедлит ее,   
в отличие от BASE СУБД, которая тоже должна гарантировать целостность, но с течением времени.  
BASE - доступность данных в ущерб согласованности.  
ACID -  основывается на согласованности данных и надежности в случае сбоев.  

---
## Задача 4

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни,
- реакция на истечение таймаута.

Вы слышали о key-value-хранилище, которое имеет механизм Pub/Sub. 
Что это за система? Какие минусы выбора этой системы?

Ответ:  


Системой является - Redis - это key-value хранилище, имеет механизм Pub/Sub и TTL с возможностью реакции на его истечение.

##### Плюсы Redis:
- Быстрая обработка запросов. Это стало возможным благодаря выполнению всех операций в оперативной памяти. 
Высокая скорость отклика делает базу данных Redis подходящей для выполнения большого количества операций над небольшим объемом данных. Объем этот ограничен размерами оперативной памяти;
- Большой набор поддерживаемых структур данных;
- Простая установка и отсутствие зависимостей;
- Открытый исходный код и активное сообщество;
- Гибкость и масштабируемость.

##### Минусы Redis: 
- Только тривиальная модель pub/sub;
- Отсутствие очередей сообщений;
- Всего лишь один поток для работы;
- Недостаточно серьёзная защита данных;
- В транзакциях возможна потеря данных – в случае взлома или внесения изменений в программный код.


