#Домашнее задание к занятию "3.2. Работа в терминале. Лекция 2"#  
## 1. Какого типа команда cd? Попробуйте объяснить, почему она именно такого типа:##  
##опишите ход своих мыслей, если считаете, что она могла бы быть другого типа.##  

> Команда type используется для отображения информации о типе команды. Она покажет,  как данная команда будет интерпретироваться при вводе в командной строке.  
>Опция -t указывает type печатать одно слово, описывающее тип команды, которое может быть одним из следующих:  

    псевдоним (псевдоним оболочки)  
    функция (функция оболочки)  
    встроенный (встроенный в оболочку)  
    файл (файл на диске)  
    ключевое слово (зарезервированное слово оболочки)  

Ответ:  
>>Команда cd- встроенная в оболочку BASH. Вызывается и исполняется в текущей оболочке.  
>>Если она станет внешней, то cd не сможет менять каталог в текущей оболочке.  

![Рис.1](https://github.com/sasha047/devops-netology/blob/main/dz3-2/img/1.png)  

## 2. Какая альтернатива без pipe команде grep <some_string> <some_file> | wc -l?##  
##Подсказка##  
>man grep поможет в ответе на этот вопрос.  
##Ознакомьтесь с документом о других подобных некорректных вариантах использования pipe.##  

Ответ:   
>Команды grep <some_string> <some_file> | wc -l и grep <some_string> <some_file> -c  
>показывают, сколько раз появляется слово в файле.

![Рис.2](https://github.com/sasha047/devops-netology/blob/main/dz3-2/img/2.png)  


## 3. Какой процесс с PID 1 является родителем для всех процессов в вашей виртуальной машине Ubuntu 20.04?##  
Ответ:   
>pstree -p  
![Рис.3-1 На виртуальной машине, где выполняются ДЗ](https://github.com/sasha047/devops-netology/blob/main/dz3-2/img/3-1.png)  
![Рис.3-2 На своем сервере](https://github.com/sasha047/devops-netology/blob/main/dz3-2/img/3-2.png)  
![Рис.3-3 На виртуальной машине Vagrant](https://github.com/sasha047/devops-netology/blob/main/dz3-2/img/3-3.png)  
![Рис.3-4 Применил фильтр](https://github.com/sasha047/devops-netology/blob/main/dz3-2/img/3-4.png)  

>Можно отфильтровать так: pstree -p | head -n 1  

## 4. Как будет выглядеть команда, которая перенаправит вывод stderr ls на другую сессию терминала?##  

Ответ:   
>ls -l \home 2> /dev/pts/4  
>p.s. Также попробовал другие перенаправления выводов  
![Рис.4](https://github.com/sasha047/devops-netology/blob/main/dz3-2/img/4.png)  

## 5. Получится ли одновременно передать команде файл на stdin и вывести ее stdout в другой файл? Приведите работающий пример.##  
Ответ:   
>cat <file1 >file2  

![Рис.5](https://github.com/sasha047/devops-netology/blob/main/dz3-2/img/5.png)  


## 6. Получится ли, находясь в графическом режиме, вывести данные из PTY в какой-либо из эмуляторов TTY? Сможете ли вы наблюдать выводимые данные?##
Решение:  
>Выполнил перенаправление вывода из pts в tty  
>Наблюдать в графическом режине не получится, переключился в консоль.  
>Также можно сделать и наоборот  

![Рис.6-1](https://github.com/sasha047/devops-netology/blob/main/dz3-2/img/6-1.png)  
![Рис.6-2](https://github.com/sasha047/devops-netology/blob/main/dz3-2/img/6-2.png)  

## 7. Выполните команду bash 5>&1. К чему она приведет? Что будет, если вы выполните echo netology > /proc/$$/fd/5? Почему так происходит?##  

Ответ:  
>Команда bash 5>&1 создает дескриптор 5 и перенправит его в stdout  
>Команда echo netology > /proc/$$/fd/5 выведет в дескриптор 5, который был перенаправлен в stdout  
>Но это работает в рамках текущей сессии. Если выполнить команду echo netology > /proc/$$/fd/5 в другой сессии- будет ошибка.  

![Рис.7](https://github.com/sasha047/devops-netology/blob/main/dz3-2/img/7.png)  


## 8. Получится ли в качестве входного потока для pipe использовать только stderr команды, не потеряв при этом отображение stdout на pty?  
##Напоминаем: по умолчанию через pipe передается только stdout команды слева от | на stdin команды справа.  
##Это можно сделать, поменяв стандартные потоки местами через промежуточный новый дескриптор, который вы научились создавать в предыдущем вопросе.##  

Ответ:  
>7>&2 - создал новый дескриптор 7 и  перенаправил его в stderr  
>2>&1 - stderr перенаправили в stdout  
>1>&7 - stdout - перенаправили в в новый дескриптор 7  

## 9. Что выведет команда cat /proc/$$/environ? Как еще можно получить аналогичный по содержанию вывод?##  

Ответ:  
>Команда выведет набор переменных окружения.  

>Команды: env, printent, exporrt - выведут тоже самое, только построчно  

## 10. Используя man, опишите что доступно по адресам /proc/<PID>/cmdline, /proc/<PID>/exe. ##  
>Строка 212 /proc/<PID>/cmdline  — содержит параметры командной строки, переданные на этапе запуска процесса  

>Строка 237  /proc/<PID>/exe — является символьной ссылкой на исполненный бинарный файл  

![Рис.10 Пример работы команд](https://github.com/sasha047/devops-netology/blob/main/dz3-2/img/4.png)  

##Решение:##
>Ввели команду cat. Теперь данная команда будет ожидать вашего ввода:

>Открываем второе окно терминала и находим  идентификатор процесса cat с помощью команды pgrep cat

>Теперь исследуем первый относящийся к процессу файл с именем cmdline. 
>Этот файл должен содержать параметры командной строки, переданные исполняемому файлу при запуске процесса:

>$ cat proc/106840/cmdline
>cat

>файл exe- Представляет собой символьную ссылку на абсолютную директорию запущенного бинарного файла. В нашем случае это путь к утилите cat:

>$ ls -l /proc/106840/exe


######11. Узнайте, какую наиболее старшую версию набора инструкций SSE поддерживает ваш процессор с помощью /proc/cpuinfo.
>Ответ: 
>SSE 4.2
Рис.11


######12. При открытии нового окна терминала и vagrant ssh создается новая сессия и выделяется pty.
######Это можно подтвердить командой tty, которая упоминалась в лекции 3.2.
######Однако:

>vagrant@netology1:~$ ssh localhost 'tty'
>not a tty
######Почитайте, почему так происходит, и как изменить поведение.
Рис.12
>Ответ: 
>Параметр -T определяет поведение при подключении. 
>Если мы запустим ssh с этим параметром, то мы отключим поведение pseudo-terminal. 
>Т.е.как бы в прямом доступе. Без командного интерпретатора (bash). 
>Из-за этого не будут работать некоторые команды и скрипты. 


######13. Бывает, что есть необходимость переместить запущенный процесс из одной сессии в другую. 
######Попробуйте сделать это, воспользовавшись reptyr.
######Например, так можно перенести в screen процесс, который вы запустили по ошибке в обычной SSH-сессии.
>Решение:
>Нашел информацию тут: https://github.com/nelhage/reptyr

Рис.13 Пример выполнения команды


######14. sudo echo string > /root/new_file не даст выполнить перенаправление под обычным пользователем, 
######так как перенаправлением занимается процесс shell'а, который запущен без sudo под вашим пользователем. 
######Для решения данной проблемы можно использовать конструкцию echo string | sudo tee /root/new_file. 
######Узнайте? что делает команда tee и почему в отличие от sudo echo команда с sudo tee будет работать.

>Ответ: 
>команда tee делает вывод одновременно и в файл, указаный в качестве параметра, и в stdout. 
>в данном случае команда получает вывод из stdin, перенаправленный через pipe от stdout команды echo
>Т.к. команда запущена от sudo , соотвественно имеет права на запись.
